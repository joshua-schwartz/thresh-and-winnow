!function($,t,s){"use strict";$.DropDown=function(t,s){this.$el=$(s),this._init(t)},$.DropDown.defaults={speed:300,easing:"ease",gutter:0,stack:!0,delay:0,random:!1,rotated:!1,slidingIn:!1,onOptionSelect:function(t){return!1}},$.DropDown.prototype={_init:function(t){this.options=$.extend(!0,{},$.DropDown.defaults,t),this._layout(),this._initEvents()},_layout:function(){var t=this;this.minZIndex=1e3,this._transformSelect(),this.opts=this.listopts.children("li"),this.optsCount=this.opts.length,this.size={width:this.dd.width(),height:this.dd.height()};var i=this.$el.attr("name"),o=this.$el.attr("id"),n=i!==s?i:o!==s?o:"cd-dropdown-"+(new Date).getTime();this.inputEl=$('<input type="hidden" name="'+n+'"></input>').insertAfter(this.selectlabel),this.selectlabel.css("z-index",this.minZIndex+this.optsCount),this._positionOpts(),Modernizr.csstransitions&&setTimeout(function(){t.opts.css("transition","all "+t.options.speed+"ms "+t.options.easing)},25)},_transformSelect:function(){var t="",i="";this.$el.children("option").each(function(){var o=$(this),n=isNaN(o.attr("value"))?o.attr("value"):Number(o.attr("value")),e=o.attr("class"),a=o.attr("data-page"),h=o.attr("data-section"),p=o.attr("data-url"),d="<b>"+a+"</b>"+h;-1!==n?t+=e!==s?'<li data-value="'+n+'" data-url="'+p+'"><span class="'+e+'"><b>'+a+"</b>"+h+"</span></li>":'<li data-value="'+n+'" data-url="'+p+'"><span><b>'+a+"</b>"+h+"</span></li>":i=d}),this.listopts=$("<ul/>").append(t),this.selectlabel=$("<span/>").append(i),this.dd=$('<div class="cd-dropdown"/>').append(this.selectlabel,this.listopts).insertAfter(this.$el),this.$el.remove()},_positionOpts:function(t){var s=this;this.listopts.css("height","auto"),this.opts.each(function(t){$(this).css({zIndex:s.minZIndex+s.optsCount-1-t,top:s.options.slidingIn?(t+1)*(s.size.height+s.options.gutter):0,left:0,marginLeft:s.options.slidingIn?t%2===0?s.options.slidingIn:-s.options.slidingIn:0,opacity:s.options.slidingIn?0:1,transform:"none"})}),this.options.slidingIn||this.opts.eq(this.optsCount-1).css({top:this.options.stack?9:0,left:this.options.stack?4:0,width:this.options.stack?this.size.width-8:this.size.width,transform:"none"}).end().eq(this.optsCount-2).css({top:this.options.stack?6:0,left:this.options.stack?2:0,width:this.options.stack?this.size.width-4:this.size.width,transform:"none"}).end().eq(this.optsCount-3).css({top:this.options.stack?3:0,left:0,transform:"none"})},_initEvents:function(){var t=this,s=this._throwHook;this.selectlabel.on("mousedown.dropdown",function(s){return t.opened?t.close():t.open(),!1}),this.opts.on("click.dropdown",function(){if(t.opened){var s=$(this);t.options.onOptionSelect(s),t.inputEl.val(s.data("value")),t.selectlabel.html(s.html()),t.close()}})},open:function(){var t=this;this.dd.toggleClass("cd-active"),this.listopts.css("height",(this.optsCount+1)*(this.size.height+this.options.gutter)),this.opts.each(function(s){$(this).css({opacity:1,top:t.options.rotated?t.size.height+t.options.gutter:(s+1)*(t.size.height+t.options.gutter),left:t.options.random?Math.floor(11*Math.random()-5):0,width:t.size.width,marginLeft:0,transform:t.options.random?"rotate("+Math.floor(11*Math.random()-5)+"deg)":t.options.rotated?"right"===t.options.rotated?"rotate(-"+5*s+"deg)":"rotate("+5*s+"deg)":"none",transitionDelay:t.options.delay&&Modernizr.csstransitions?t.options.slidingIn?s*t.options.delay+"ms":(t.optsCount-1-s)*t.options.delay+"ms":0})}),this.opened=!0},close:function(){var t=this;this.dd.toggleClass("cd-active"),this.options.delay&&Modernizr.csstransitions&&this.opts.each(function(s){$(this).css({"transition-delay":t.options.slidingIn?(t.optsCount-1-s)*t.options.delay+"ms":s*t.options.delay+"ms"})}),this._positionOpts(!0),this.opened=!1}},$.fn.dropdown=function(t){var s=$.data(this,"dropdown");if("string"==typeof t){var i=Array.prototype.slice.call(arguments,1);this.each(function(){s[t].apply(s,i)})}else this.each(function(){s?s._init():s=$.data(this,"dropdown",new $.DropDown(t,this))});return s}}(jQuery,window);